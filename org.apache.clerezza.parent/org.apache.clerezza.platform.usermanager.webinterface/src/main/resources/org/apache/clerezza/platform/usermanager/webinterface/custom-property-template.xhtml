def umr(s: Any) = new UriRef("http://clerezza.org/2009/05/usermanager#" + s)
def cp(s: Any) = new UriRef("http://clerezza.org/2009/06/custompropery#" + s)

resultDocModifier.addScriptReference("js/usermanager.js");

resultDocModifier.setTitle("User Manager");
resultDocModifier.addNodes2Elem("tx-module", <h1>User Manager</h1>);

resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li><a href="list-users">Users</a></li>);
resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li class="tx-active"><a href="list-roles">Roles</a></li>);

resultDocModifier.addNodes2Elem("tx-contextual-buttons-ol", <li><a id="editButton" class="tx-button tx-button-generic" href="list-roles">Back to Overview</a></li>);



        <div id="tx-content">
			<script type="text/javascript">
				$(document).ready(function() {{
					$("#deleteButton").bind("click", function() {{
						$("form").submit();
					}});
				}});
			</script>
            <div class="list">
            <table>
                <tr align="center">
                    <th>Label</th>
                    <th>URI</th>
                    <th></th>
                </tr>
               { for (customfield <- (res/cp("customfield"))) yield {
                <tr>
                    <td>{customfield/cp("presentationlabel")*}</td>
                    <td>{customfield/cp("property")*}</td>
                    <td>
                        <form action="delete-custom-field" method="post">
                            <div>
                                <input name="property" type="hidden" value={customfield/cp("property")*} />
                                <input name="role" type="hidden" value={customfield/umr("role")*} />
								<input type="submit" value="delete"/>
                            </div>
                        </form>
                    </td>
                </tr>
                }
				}
            </table>
            <div>
                <a href={"add-single-property?roleTitle="+ (res/umr("role")*)}>add single-valued property</a>/
                <a href={"add-multiple-property?roleTitle="+ (res/umr("role")*)}>add multiple-valued property</a>
            </div>
            </div>
        </div>
