def umr(s: Any) = new UriRef("http://clerezza.org/2009/05/usermanager#" + s)
def cf(s: Any) = new UriRef("http://clerezza.org/2009/05/customfield#" + s)

resultDocModifier.addScriptReference("js/usermanager.js");

resultDocModifier.setTitle("User Manager");
resultDocModifier.addNodes2Elem("tx-module", <h1>User Manager</h1>);

resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li class="tx-active"><a href="#">Users</a></li>);
resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li><a href="list-roles">Roles</a></li>);

resultDocModifier.addNodes2Elem("tx-contextual-buttons-ol", <li><a id="editButton" class="tx-button tx-button-generic" href="list-roles">Back to Overview</a></li>);
resultDocModifier.addNodes2Elem("tx-contextual-buttons-ol", <li><a id="addButton" class="tx-button tx-button-create" href="javascript:saveUser()">Save</a></li>);

        <div id="tx-content">
		<div class="tx-list" id="tx-list">
		<table>
			<tr align="center">
				<th>Label</th>
				<th>URI</th>
				<th colspan="2"></th>
			</tr>
			{ for (cstmField <- (res/umr("customField"))) yield {
			<tr>
				<td>{cstmField/cf("presentationLabel")*}</td>
				<td>{cstmField/cf("property")*}</td>
				<td>
					<form action="delete-custom-field" method="post">
						<div>
							<input name="property" type="hidden" value={cstmField/cf("property")*} />
							<input name="label" type="hidden" value={cstmField/cf("presentationLabel")*} />
							<input type="submit" value="delete"/>
						</div>
					</form>
				</td>
			</tr>
			}
			}
		</table>
		<div>
			<input id="addsinglevaluedfieldbutton" type="button" value="add single-valued field" onclick="showAddSingleValuedFieldForm();" />
			<input id="addmultivaluedfieldbutton" type="button" value="add multi-valued field" onclick="showAddMultiValuedFieldForm();" />
		</div>
		<form action="" id="addsinglevaluedfieldform" style="display:none;">
			<table>
				<tr>
					<td align="right">Property:</td>
					<td><input name="property" type="text" />Well-formed URI required</td>
				</tr>
				<tr>
					<td align="right">Label:</td>
					<td><input name="label" type="text" /></td>
				</tr>
				<tr>
					<td></td>
					<td align="left"><input type="button" value="add single-valued field" onclick="javascript:addSingleValuedField()" /></td>
				</tr>
			</table>
		</form>
		<form action="" id="addmultivaluedfieldform" style="width:500px; float:left; display:none; text-align:left;">
			<table>
				<tr>
					<td align="right">Select Option: </td>
					<td>
						<select name="multiselect" size="1">
							<option>single</option>
							<option>multiple</option>
						</select>
					</td>
					<td></td>
				</tr>
				<tr>
					<td align="right">Property:</td>
					<td><input name="property" type="text" />Well-formed URI required</td>
					<td></td>
				</tr>
				<tr>
					<td align="right">Label:</td>
					<td><input name="label" type="text" /></td>
					<td></td>
				</tr>
				<tr>
					<td align="right" style="vertical-align:top;">Selectable Values: </td>
					<td style="font-size:10px;">
						<textarea cols="20" rows="3" name="selectablevalues"></textarea>
						<br />Separate values with a comma (,)
					</td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td ><input type="button" value="add multi-valued field" onclick="javascript:addMultiValuedField()" /></td>
					<td></td>
				</tr>
			</table>
		</form>
        </div>
		</div>
