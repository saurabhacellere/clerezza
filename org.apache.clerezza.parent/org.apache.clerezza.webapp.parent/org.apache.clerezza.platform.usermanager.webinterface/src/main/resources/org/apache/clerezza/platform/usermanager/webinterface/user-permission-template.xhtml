def foaf(s: Any) = new UriRef("http://xmlns.com/foaf/0.1/" + s)
def permission(s: Any) = new UriRef("http://clerezza.org/2008/10/permission#" + s)
def umr(s: Any) = new UriRef("http://clerezza.org/2009/05/usermanager#" + s)

resultDocModifier.setTitle("User Manager");
resultDocModifier.addNodes2Elem("tx-module", <h1>User Manager</h1>);

resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li class="tx-active"><a href="#">Users</a></li>);
resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li><a href="list-roles">Roles</a></li>);

resultDocModifier.addNodes2Elem("tx-contextual-buttons-ol", <li><a id="editButton" class="tx-button tx-button-generic" href="list-users">Back</a></li>);


		

		
        <div id="tx-content">
        <div class="tx-list">
			<script type="text/javascript">
				function removePermission(form) {{
					form.name.value = {"'" + (res/umr("user")/foaf("name")*) + "'"};
					form.submit();
				}}
			</script>
			<h2>Add new Permission to {res/umr("user")/foaf("name")*}</h2>
			<form method="post" action="add-user-permissions">
				<div>
					<input type="hidden" name="name" value={res/umr("user")/foaf("name")*} />
					<label>Permission Entry:
						<input type="text" name="permEntries" />
					</label>
					<input type="submit" value="Add new permission" />
				</div>
			</form>
			<h2>List of Permissions for {res/umr("user")/foaf("name")*}</h2>
			<br/>
			<table>
				<thead>
				<tr align="center">
					<th colspan="2">Permission Entry</th>
				</tr>
				</thead>
				<tbody>
				{for (perm <- (res/umr("permission"))) yield {
				<tr>
					<td>{perm/permission("javaPermissionEntry")*}</td>
					<td>
						<form method="post" action="delete-user-permissions">
							<input type="hidden" name="name" value="" />
							<input type="hidden" name="permEntries" value={perm/permission("javaPermissionEntry")*} />
							<input type="button" onclick="javascript: removePermission(this.parentNode)" value="delete" />
						</form>
					</td>
				</tr>
				}
				}
				</tbody>
			</table>
        </div>
        </div>
